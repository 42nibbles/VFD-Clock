<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VFD-Clock: src/multiplexing.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="IV3A_VFD-Clock_s.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VFD-Clock
   &#160;<span id="projectnumber">1.3</span>
   </div>
   <div id="projectbrief">— A retro VFD clock using SoC and Internet technology —</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">multiplexing.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Software for a multiplexed access to the connected VFD tubes.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;cstdint&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for multiplexing.h:</div>
<div class="dyncontent">
<div class="center"><img src="multiplexing_8h__incl.png" border="0" usemap="#src_2multiplexing_8h" alt=""/></div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="multiplexing_8h__dep__incl.png" border="0" usemap="#src_2multiplexing_8hdep" alt=""/></div>
<map name="src_2multiplexing_8hdep" id="src_2multiplexing_8hdep">
<area shape="rect" id="node2" href="main_8cpp.html" title="Main firmware compilation file for the six tube VFD clock. " alt="" coords="19,80,116,107"/>
</map>
</div>
</div>
<p><a href="multiplexing_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adb59d181e64c6efa48f897de19ee1ab7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multiplexing_8h.html#adb59d181e64c6efa48f897de19ee1ab7">clearVfd</a> ()</td></tr>
<tr class="memdesc:adb59d181e64c6efa48f897de19ee1ab7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets all VFD tubes to VFD_BLANK.  <a href="#adb59d181e64c6efa48f897de19ee1ab7">More...</a><br /></td></tr>
<tr class="separator:adb59d181e64c6efa48f897de19ee1ab7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4ecc0ef9775e19af694e192fa9548fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multiplexing_8h.html#ae4ecc0ef9775e19af694e192fa9548fd">logOffVfd</a> ()</td></tr>
<tr class="memdesc:ae4ecc0ef9775e19af694e192fa9548fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turns off the background interrupt mechanism used by <a class="el" href="multiplexing_8h.html#a6f1cff7712fd4d5041c0b4b0847f9a73" title="Output digits to VFD display. ">updateVfd()</a>.  <a href="#ae4ecc0ef9775e19af694e192fa9548fd">More...</a><br /></td></tr>
<tr class="separator:ae4ecc0ef9775e19af694e192fa9548fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad46088016139312bfc518ecd2e9fd2ca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multiplexing_8h.html#ad46088016139312bfc518ecd2e9fd2ca">setVfd</a> (const uint8_t vfd_output[<a class="el" href="multiplexing_8h.html#a73b90345cb2015dcad390ad54b7bb81c">VFD_TUBE_CNT</a>])</td></tr>
<tr class="memdesc:ad46088016139312bfc518ecd2e9fd2ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output digits to VFD display.  <a href="#ad46088016139312bfc518ecd2e9fd2ca">More...</a><br /></td></tr>
<tr class="separator:ad46088016139312bfc518ecd2e9fd2ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f1cff7712fd4d5041c0b4b0847f9a73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multiplexing_8h.html#a6f1cff7712fd4d5041c0b4b0847f9a73">updateVfd</a> (const uint8_t vfd_output[<a class="el" href="multiplexing_8h.html#a73b90345cb2015dcad390ad54b7bb81c">VFD_TUBE_CNT</a>], int dot_blink_ms_period=0)</td></tr>
<tr class="memdesc:a6f1cff7712fd4d5041c0b4b0847f9a73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output digits to VFD display.  <a href="#a6f1cff7712fd4d5041c0b4b0847f9a73">More...</a><br /></td></tr>
<tr class="separator:a6f1cff7712fd4d5041c0b4b0847f9a73"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a73b90345cb2015dcad390ad54b7bb81c"><td class="memItemLeft" align="right" valign="top"><a id="a73b90345cb2015dcad390ad54b7bb81c"></a>
const unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multiplexing_8h.html#a73b90345cb2015dcad390ad54b7bb81c">VFD_TUBE_CNT</a> = 6U</td></tr>
<tr class="memdesc:a73b90345cb2015dcad390ad54b7bb81c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count of accessible VFD tubes connected to the multiplexer. <br /></td></tr>
<tr class="separator:a73b90345cb2015dcad390ad54b7bb81c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16d5066ccfa1f53b47e91b71e3c57651"><td class="memItemLeft" align="right" valign="top"><a id="a16d5066ccfa1f53b47e91b71e3c57651"></a>
const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multiplexing_8h.html#a16d5066ccfa1f53b47e91b71e3c57651">VFD_BLANK</a> = 16</td></tr>
<tr class="memdesc:a16d5066ccfa1f53b47e91b71e3c57651"><td class="mdescLeft">&#160;</td><td class="mdescRight">Special 'blank character' value for multiplexer() array for turning tube temporarily off. <br /></td></tr>
<tr class="separator:a16d5066ccfa1f53b47e91b71e3c57651"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aca2ae1730ac18af8083ca56e57742b"><td class="memItemLeft" align="right" valign="top"><a id="a6aca2ae1730ac18af8083ca56e57742b"></a>
const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multiplexing_8h.html#a6aca2ae1730ac18af8083ca56e57742b">VFD_REFRESH_MS_PERIOD</a> = 5</td></tr>
<tr class="memdesc:a6aca2ae1730ac18af8083ca56e57742b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Refreshed tubes each 5 milliseconds. <br /></td></tr>
<tr class="separator:a6aca2ae1730ac18af8083ca56e57742b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03d4eea69f1b6e8de9de4587a3b95a38"><td class="memItemLeft" align="right" valign="top"><a id="a03d4eea69f1b6e8de9de4587a3b95a38"></a>
const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="multiplexing_8h.html#a03d4eea69f1b6e8de9de4587a3b95a38">VFD_OUTPUT_BLANK</a> [<a class="el" href="multiplexing_8h.html#a73b90345cb2015dcad390ad54b7bb81c">VFD_TUBE_CNT</a>] = {<a class="el" href="multiplexing_8h.html#a16d5066ccfa1f53b47e91b71e3c57651">VFD_BLANK</a>, <a class="el" href="multiplexing_8h.html#a16d5066ccfa1f53b47e91b71e3c57651">VFD_BLANK</a>, <a class="el" href="multiplexing_8h.html#a16d5066ccfa1f53b47e91b71e3c57651">VFD_BLANK</a>, <a class="el" href="multiplexing_8h.html#a16d5066ccfa1f53b47e91b71e3c57651">VFD_BLANK</a>, <a class="el" href="multiplexing_8h.html#a16d5066ccfa1f53b47e91b71e3c57651">VFD_BLANK</a>, <a class="el" href="multiplexing_8h.html#a16d5066ccfa1f53b47e91b71e3c57651">VFD_BLANK</a>}</td></tr>
<tr class="memdesc:a03d4eea69f1b6e8de9de4587a3b95a38"><td class="mdescLeft">&#160;</td><td class="mdescRight">VFD output for a all blank display. <br /></td></tr>
<tr class="separator:a03d4eea69f1b6e8de9de4587a3b95a38"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Software for a multiplexed access to the connected VFD tubes. </p>
<p>The VFD clock display consists of six 7-segment VFD tubes. The tube types may be IV-3A (ИВ-3А) or IV-12 (ИВ-12).</p>
<div class="image">
<img src="IV-3A_front_s.jpg" alt="IV-3A_front_s.jpg"/>
<div class="caption">
ИВ-3А, Translit IV-3A</div></div>
<div class="image">
<img src="IV-12_front_s.jpg" alt="IV-12_front_s.jpg"/>
<div class="caption">
ИВ-12, Translit IV-12</div></div>
<p> Tube descriptions can be found in the file <a href="../specs/russian-book-0001.djvu" title="russian-book-0001.djvu">russian-book</a>. For the description of ИВ-3А take a look at page 190, for ИВ-12 at page 193.</p>
<p>A short help to get along with the russion language.</p>
<ul>
<li>
<em>Точка, Translit Tochka</em> means dot. </li>
<li>
The physical quantity can often be derived from their units. </li>
</ul>
<p>The tubes are driven in a multiplexed mode as shown here:</p>
<p><code>. . 1 . . 1</code><br />
 <code>. 2 . . 2 .</code><br />
 <code>3 . . 3 . .</code></p>
<p>It seems to be practical to switch on each group for ca. 5 milliseconds (200 Hz) or shorter to avoid the impression of flickering. You can find example code under <a class="el" href="multiplexing_8h.html#ad46088016139312bfc518ecd2e9fd2ca" title="Output digits to VFD display. ">setVfd()</a>.</p>
<p>Because this is rather annoying–especially if you like to strictly comply the timing–there is a second way doing this by using a background interrupt mechanism by using <a class="el" href="multiplexing_8h.html#a6f1cff7712fd4d5041c0b4b0847f9a73" title="Output digits to VFD display. ">updateVfd()</a>.</p>
<p>Beware: The background interrupt seems to clash with the WiFi manager in its server mode. So do not use them together which would result in a crashing WiFi library.</p>
<p>When using the function <a class="el" href="multiplexing_8h.html#a6f1cff7712fd4d5041c0b4b0847f9a73" title="Output digits to VFD display. ">updateVfd()</a> you also have control over the decimal dots. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="adb59d181e64c6efa48f897de19ee1ab7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb59d181e64c6efa48f897de19ee1ab7">&#9670;&nbsp;</a></span>clearVfd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clearVfd </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets all VFD tubes to VFD_BLANK. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="multiplexing_8h.html#a16d5066ccfa1f53b47e91b71e3c57651" title="Special &#39;blank character&#39; value for multiplexer() array for turning tube temporarily off...">VFD_BLANK</a> </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="multiplexing_8h_adb59d181e64c6efa48f897de19ee1ab7_cgraph.png" border="0" usemap="#multiplexing_8h_adb59d181e64c6efa48f897de19ee1ab7_cgraph" alt=""/></div>
<map name="multiplexing_8h_adb59d181e64c6efa48f897de19ee1ab7_cgraph" id="multiplexing_8h_adb59d181e64c6efa48f897de19ee1ab7_cgraph">
<area shape="rect" id="node2" href="multiplexing_8h.html#ad46088016139312bfc518ecd2e9fd2ca" title="Output digits to VFD display. " alt="" coords="124,5,184,32"/>
<area shape="rect" id="node3" href="hv5812_8h.html#af76ad29d7bbaa70126ae575b211200a7" title="Transmit data to shift register ic. " alt="" coords="232,5,361,32"/>
</map>
</div>

</div>
</div>
<a id="ae4ecc0ef9775e19af694e192fa9548fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4ecc0ef9775e19af694e192fa9548fd">&#9670;&nbsp;</a></span>logOffVfd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void logOffVfd </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turns off the background interrupt mechanism used by <a class="el" href="multiplexing_8h.html#a6f1cff7712fd4d5041c0b4b0847f9a73" title="Output digits to VFD display. ">updateVfd()</a>. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="multiplexing_8h.html#a6f1cff7712fd4d5041c0b4b0847f9a73" title="Output digits to VFD display. ">updateVfd()</a> </dd></dl>

</div>
</div>
<a id="ad46088016139312bfc518ecd2e9fd2ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad46088016139312bfc518ecd2e9fd2ca">&#9670;&nbsp;</a></span>setVfd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setVfd </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>vfd_output</em>[VFD_TUBE_CNT]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Output digits to VFD display. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vfd_output[]</td><td>Array of digits to be displayed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="multiplexing_8h.html#a73b90345cb2015dcad390ad54b7bb81c" title="Count of accessible VFD tubes connected to the multiplexer. ">VFD_TUBE_CNT</a> </dd>
<dd>
<a class="el" href="multiplexing_8h.html#a16d5066ccfa1f53b47e91b71e3c57651" title="Special &#39;blank character&#39; value for multiplexer() array for turning tube temporarily off...">VFD_BLANK</a></dd></dl>
<p>Each particular tube is dedicated to a element of the vfd_output array. If MAX_TUBE_CNT is six the element [0] is the rightmost tube and the element [5] the leftmost tube.</p>
<p>The used tubes are VFD-7-Segement tubes so we are able to display 16 digits from '<code>0,1,2,...,F</code>'. Valid values for the digits are from 0 to 15. A special value is 16 which means <code>' '</code> (blank). This value is also defined in VFD_BLANK.</p>
<p>So this source code could be used for displaying <code>"  42  "</code> for four seconds: </p><div class="fragment"><div class="line"><span class="comment">// VFD display greeting message &quot;  42  &quot; for 4 seconds.</span></div><div class="line"><span class="comment">// Don&#39;t forget to do i/o setup before this.</span></div><div class="line"><span class="comment">// VFD display greeting message &quot;  42  &quot;</span></div><div class="line">uint8_t vfd_output[<a class="code" href="multiplexing_8h.html#a73b90345cb2015dcad390ad54b7bb81c">VFD_TUBE_CNT</a>];</div><div class="line"><span class="comment">// Values are 0 to 15 for &#39;0,1,2,...,F&#39;. 16 is &#39; &#39; (blank)</span></div><div class="line">vfd_output[0] = <a class="code" href="multiplexing_8h.html#a16d5066ccfa1f53b47e91b71e3c57651">VFD_BLANK</a>; <span class="comment">// rightmost tube</span></div><div class="line">vfd_output[1] = <a class="code" href="multiplexing_8h.html#a16d5066ccfa1f53b47e91b71e3c57651">VFD_BLANK</a>;</div><div class="line">vfd_output[2] = 2;</div><div class="line">vfd_output[3] = 4;</div><div class="line">vfd_output[4] = <a class="code" href="multiplexing_8h.html#a16d5066ccfa1f53b47e91b71e3c57651">VFD_BLANK</a>;</div><div class="line">vfd_output[5] = <a class="code" href="multiplexing_8h.html#a16d5066ccfa1f53b47e91b71e3c57651">VFD_BLANK</a>; <span class="comment">// leftmost tube</span></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> DISPLAY_DELAY_MILLIS = 4000UL;</div><div class="line"><span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> START_MILLIS = millis();</div><div class="line"><span class="keywordflow">while</span> ((millis() - START_MILLIS) &lt; DISPLAY_DELAY_MILLIS) {</div><div class="line">  <a class="code" href="multiplexing_8h.html#ad46088016139312bfc518ecd2e9fd2ca">setVfd</a>(vfd_output);</div><div class="line">  delay(1UL);</div><div class="line">}</div><div class="line"><a class="code" href="multiplexing_8h.html#adb59d181e64c6efa48f897de19ee1ab7">clearVfd</a>();</div></div><!-- fragment --><p>The recommended refresh rate of the Display is 5 milliseconds or shorter. If it is too slow the display has a visible flicker effect. When you get even slower you can see the multiplexing groups. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="multiplexing_8h_ad46088016139312bfc518ecd2e9fd2ca_cgraph.png" border="0" usemap="#multiplexing_8h_ad46088016139312bfc518ecd2e9fd2ca_cgraph" alt=""/></div>
<map name="multiplexing_8h_ad46088016139312bfc518ecd2e9fd2ca_cgraph" id="multiplexing_8h_ad46088016139312bfc518ecd2e9fd2ca_cgraph">
<area shape="rect" id="node2" href="hv5812_8h.html#af76ad29d7bbaa70126ae575b211200a7" title="Transmit data to shift register ic. " alt="" coords="113,5,243,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="multiplexing_8h_ad46088016139312bfc518ecd2e9fd2ca_icgraph.png" border="0" usemap="#multiplexing_8h_ad46088016139312bfc518ecd2e9fd2ca_icgraph" alt=""/></div>
<map name="multiplexing_8h_ad46088016139312bfc518ecd2e9fd2ca_icgraph" id="multiplexing_8h_ad46088016139312bfc518ecd2e9fd2ca_icgraph">
<area shape="rect" id="node2" href="multiplexing_8h.html#adb59d181e64c6efa48f897de19ee1ab7" title="Sets all VFD tubes to VFD_BLANK. " alt="" coords="113,5,184,32"/>
</map>
</div>

</div>
</div>
<a id="a6f1cff7712fd4d5041c0b4b0847f9a73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f1cff7712fd4d5041c0b4b0847f9a73">&#9670;&nbsp;</a></span>updateVfd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void updateVfd </td>
          <td>(</td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>vfd_output</em>[VFD_TUBE_CNT], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dot_blink_ms_period</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Output digits to VFD display. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vfd_output[]</td><td>Array of digits to be displayed. </td></tr>
    <tr><td class="paramname">dot_blink_ms_period</td><td>Control of dot blinking behaviour. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="multiplexing_8h.html#a73b90345cb2015dcad390ad54b7bb81c" title="Count of accessible VFD tubes connected to the multiplexer. ">VFD_TUBE_CNT</a> </dd>
<dd>
<a class="el" href="multiplexing_8h.html#a16d5066ccfa1f53b47e91b71e3c57651" title="Special &#39;blank character&#39; value for multiplexer() array for turning tube temporarily off...">VFD_BLANK</a> </dd>
<dd>
<a class="el" href="multiplexing_8h.html#a6aca2ae1730ac18af8083ca56e57742b" title="Refreshed tubes each 5 milliseconds. ">VFD_REFRESH_MS_PERIOD</a> </dd>
<dd>
<a class="el" href="multiplexing_8h.html#ae4ecc0ef9775e19af694e192fa9548fd" title="Turns off the background interrupt mechanism used by updateVfd(). ">logOffVfd()</a> </dd>
<dd>
<a class="el" href="multiplexing_8h.html#adb59d181e64c6efa48f897de19ee1ab7" title="Sets all VFD tubes to VFD_BLANK. ">clearVfd()</a></dd></dl>
<p>Each particular tube is dedicated to a element of the vfd_output array. If MAX_TUBE_CNT is six the element [0] is the rightmost tube and the element [5] the leftmost tube.</p>
<p>The used tubes are VFD-7-Segement tubes so we are able to display 16 digits from '<code>0,1,2,...,F</code>'. Valid values for the digits are from 0 to 15. A special value is 16 which means <code>' '</code> (blank). This value is also defined in VFD_BLANK.</p>
<p>So this source code could be used for displaying <code>"  42  "</code> for four seconds: </p><div class="fragment"><div class="line"><span class="comment">// VFD display greeting message &quot;  42  &quot; for 4 seconds.</span></div><div class="line"><span class="comment">// Don&#39;t forget to do i/o setup before this.</span></div><div class="line"><span class="comment">// VFD display greeting message &quot;  42  &quot;</span></div><div class="line">uint8_t vfd_output[<a class="code" href="multiplexing_8h.html#a73b90345cb2015dcad390ad54b7bb81c">VFD_TUBE_CNT</a>];</div><div class="line"><span class="comment">// Values are 0 to 15 for &#39;0,1,2,...,F&#39;. 16 is &#39; &#39; (blank)</span></div><div class="line">vfd_output[0] = <a class="code" href="multiplexing_8h.html#a16d5066ccfa1f53b47e91b71e3c57651">VFD_BLANK</a>; <span class="comment">// rightmost tube</span></div><div class="line">vfd_output[1] = <a class="code" href="multiplexing_8h.html#a16d5066ccfa1f53b47e91b71e3c57651">VFD_BLANK</a>;</div><div class="line">vfd_output[2] = 2;</div><div class="line">vfd_output[3] = 4;</div><div class="line">vfd_output[4] = <a class="code" href="multiplexing_8h.html#a16d5066ccfa1f53b47e91b71e3c57651">VFD_BLANK</a>;</div><div class="line">vfd_output[5] = <a class="code" href="multiplexing_8h.html#a16d5066ccfa1f53b47e91b71e3c57651">VFD_BLANK</a>; <span class="comment">// leftmost tube</span></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> DISPLAY_DELAY_MILLIS = 4000UL;</div><div class="line"><a class="code" href="multiplexing_8h.html#a6f1cff7712fd4d5041c0b4b0847f9a73">updateVfd</a>(vfd_output, -1);</div><div class="line">delay(DISPLAY_DELAY_MILLIS);</div><div class="line"><a class="code" href="multiplexing_8h.html#ae4ecc0ef9775e19af694e192fa9548fd">logOffVfd</a>(); <span class="comment">// If you like to turn off background interrupt stuff for VFD stuff.</span></div><div class="line"><a class="code" href="multiplexing_8h.html#adb59d181e64c6efa48f897de19ee1ab7">clearVfd</a>();</div></div><!-- fragment --><p>The recommended refresh rate of the Display is 5 milliseconds or shorter. If it is too slow the display has a visible flicker effect. When you get even slower you can see the multiplexing groups. The flash rate is determined by VFD_REFRESH_MS_PERIOD.</p>
<p>If you set dot_blink_ms_period to 0 the dots are continuously turned on. If you put this to a negative number the dots are continuously turned off. Otherwise you can set a period time of e.g. 1000 ms, that would be synchronous with your tubes displaying the value of the seconds. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="multiplexing_8h_a6f1cff7712fd4d5041c0b4b0847f9a73_cgraph.png" border="0" usemap="#multiplexing_8h_a6f1cff7712fd4d5041c0b4b0847f9a73_cgraph" alt=""/></div>
<map name="multiplexing_8h_a6f1cff7712fd4d5041c0b4b0847f9a73_cgraph" id="multiplexing_8h_a6f1cff7712fd4d5041c0b4b0847f9a73_cgraph">
<area shape="rect" id="node2" href="hv5812_8h.html#af76ad29d7bbaa70126ae575b211200a7" title="Transmit data to shift register ic. " alt="" coords="135,5,264,32"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
